\chapter{Condensed Matter XUV Transient Absorption Experiments}

\section{Statement of Contribution}
This experiment uses home-made equipment consisting of a XUV-IR Mach-Zhender interferometer, a bright XUV light source, a target chamber and an XUV photon spectrometer. The entire apparatus was designed, built and tested by Gregory Smith and Stephen Hageman. The LabView software controlling the spectrometer's detector was programmed by Kent Talbert. The vacuum system's safety system was designed and programmed by Andrew Piper. The germanium samples were grown by Dr. Yaguo Tang. Transient absorption experiments were done by Gregory Smith and Stephen Hageman. Analysis presented in this document was done by Gregory Smith. Further details on the apparatus and the relevant physics will be discussed in the main dissertation.

\section{Introduction}

\begin{figure}
	\centering
	\includegraphics[width=0.95\textwidth]{figures/chap3/beamline_schematic.png}
	\caption{Schematic of the Transient Absorption BeamLine (TABLe). Blue shaded region is under vacuum. BS: beam splitter, L: lens, S: computer-controlled shutter, HHG: high harmonic generation, F: metallic filter, EM: ellipsoidal mirror, HM: hole mirror, PD: photodiode, DG: dispersive grating, MCP/P: micro-channel plate and phosphor.}
	\label{fig:beamline_schematic}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/ATAS_Cartoon_Si_Leone.jpg}
	\caption{Schematic of an attosecond transient absorption spectroscopy (ATAS) experiment. An IR laser pulse excites electrons in the material, driving them across the band-gap. An XUV pulse passes through the sample after a delay $\Delta t$. The measured XUV absorbance is sensitive to electronic populations and states. Figure taken from \cite{schultzeAttosecondBandgapDynamics2014}.}
	\label{fig:ATAS_Cartoon_Si_Leone}
\end{figure}

We generate extreme ultraviolet (XUV) light using an extremely non-linear process called \textit{high harmonic generation} (HHG). Briefly, the XUV light source can be thought of as a frequency comb spanning from $\sim20$ eV to $\sim50$ eV. The separation between the teeth of the frequency comb is $\omega$, the frequency of our laser light. In the time domain, the XUV is a train of attosecond bursts of broadband light with an envelope of $\sim50$ fs. Due to the ionizing nature of XUV light, the entire experiment must be performed under vacuum.

The experiment is powered by a commercial mid-IR laser system (Spectra Physics Spitfire ACE, Light Conversion HE TOPAS Prime), which delivers $\sim2$ mJ at $100 - 1,000$ Hz repetition rate, $\sim65$ fs duration, $1.2 - 2.5$ $\mu$m wavelength. The output of the TOPAS is routed into a Mach-Zhender interferometer, shown in \cref{fig:beamline_schematic}. A beam splitter (BS) delivers the bulk of the pulse energy ($96\%$) to the generation arm of the interferometer, which contains the HHG source and specialized XUV focusing optics. A small percentage of TOPAS's pulse energy goes to the pump arm, which contains optics to control the pulse energy and relative delay between the two arms. The pump arm also contains a series of lenses that focus the light into the vacuum system. A silvered hole mirror (HM) combines the two arms of the interferometer collinearly. This optic is designed to allow the XUV light to pass through a clear aperture on the backside of the HM while the pump arm's IR light reflects off the front face. The interferometer is aligned so that both arms have a common focus in the target chamber.

The basic concept of an attosecond transient absorption spectroscopy (ATAS) experiment is shown in \cref{fig:ATAS_Cartoon_Si_Leone}. In this experiment, a sample is placed at the combined XUV/IR focus in a transmission (normal) geometry. An XUV photon spectrometer is placed behind the sample and the transmitted XUV spectrum $S$ is measured as a function of XUV-IR delay. The IR light is not measured by the spectrometer.

Absorption features in the spectrum correspond to photoabsorption, which drive electronic transitions. At XUV photon energies, these transitions are from a core-level state to a state near the Fermi level. Since the HHG process produces a near-continuum, the XUV light will drive nearly all allowed transitions within its bandwidth. One of the core assumptions of an ATAS experiment is that the initial core state is shielded from the IR pulse by the valence electrons. However, the valence states are influenced by the external IR field, which causes both a change in electron population among these states, as well as a change in the states themselves. By measuring the XUV spectrum as a function of XUV-IR delay, we can track these electronic transitions - and thus the sample's electron dynamics - in response to an ultrafast optical excitation.

one way to think about ATAS: using the material's own electrons to probe their dynamics. i.e., the core electons are an electron source and they probe the dynamics near the Fermi level.

\textbf{something, something physical motivation. maybe talk about what other measurements have done.}

\textbf{IR=pump, XUV=probe is not strictly true ... but it is a good approximation in solids.}

\textbf{need citations for this discussion, also maybe some equations.}

excitation fraction of sample due to IR pump

estimation of ATAS transient absorption signal strength, based on XUV flux, excitation amount, etc.


\subsection{Relative Contributions of Real and Imaginary Parts of $\tilde{n}$}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Fresnel_Geometry.png}
	\caption{Normal and non-normal incident geometries. \textbf{a)} Normal incidence geometry showing Fresnel coefficients $R_F$, $T_F$ for interfaces and total transmission $T$ and reflectance $R$ for a slab of thickness $h$. Figure recreated from \cite{nichelattiComplexRefractiveIndex2002}. \textbf{b)} Non-normal geometry showing definitions of angles $\theta_i, \theta_r$ and $\theta_t$ with respect to each interface.}
	\label{fig:Fresnel_Geometry}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Si_transmission_Fresnel.png}
	\caption{Consequences of ignoring the real part of $\tilde{n}$ when calculating the transmission $T$ of a thin sample. Top panel: complex refractive index of silicon using the notation from \cref{eqn:complex_index}. The Si $L$-edge absorption feature is visible near 100 eV. Data from \cite{gulliksonCXROXRayInteractions}. Bottom panel: relative error in $T$, as defined in \cref{eqn:Fresnel_rel_err}, introduced by ignoring the contribution of $\Re(\tilde{n})$. An infinite number of bounces (e.g., \cref{eqn:Fresnel_coefs_inf_bounce}) is assumed.}
	\label{fig:Si_transmission_Fresnel}
	% plotted using \Python Scripts\CXRO\test real_imag_index_plotting.py
\end{figure}

In a transient absorption experiment, we measure the transmission $T$. Generally speaking, $T$ depends on both parts of the complex refractive index: $\tilde{n} = n + i k$. However, in a normal transmission geometry it turns out that the contribution of $\Im(\tilde{n})$ dominates the measured signal, and to a good approximation the role of $\Re(\tilde{n})$ can be ignored. Note that in a non-normal reflection geometry, both parts of $\tilde{n}$ make significant contributitions to the measured signal. In the following discussion we will analyze the Fresnel equations to see why this is the case. This section will draw from arguments made in reference \cite{nichelattiComplexRefractiveIndex2002}.

First, we consider the normal geometry shown in the left panel of \cref{fig:Fresnel_Geometry}. We write the complex index of refraction in the following form:
\begin{equation}
\begin{aligned}
\tilde{n} &= n - i k \\
&= (1-\delta) - i \beta
\end{aligned}
\label{eqn:complex_index}
\end{equation}
The Fresnel coefficients $R_F$ and $T_F$ describe the interface reflectance and transmittance and depend on both parts of the complex index $\tilde{n}$. For normal incidence, they are:
\begin{equation}
\begin{aligned}
R_F &= \left| \frac{n-ik-1}{n-ik+1}   \right|^2 \\
T_F &=  \frac{4n}{\left|n-ik+1\right|^2}
\end{aligned}
\label{eqn:fresnel_normal}
\end{equation}
Absorption in the bulk is described via the absorption length $\alpha$:
\begin{equation}
\alpha = 4 \pi k / \lambda
\end{equation}
Ignoring interface effects, the transmisison through the bulk is:
\begin{equation}
T_{\text{bulk}} = \exp( - \alpha h)
\end{equation}
Note that $\alpha$ and $T_{\text{bulk}}$ only depend on $k$.

The total reflectance $R$ and transmission $T$ are the result of interface effects plus bulk effects. We must consider the case where the detected light is the result of multiple reflections within the sample. Neglecting interference, we consider the case of $2N$ bounces where the laser's coherence length is less than the thickness of the bulk. In this case, the sum is incoherent with the expressions for $T$ and $R$ given by:
\begin{equation}
\begin{aligned}
R &= R_F + R_F T_F^2 T_{\text{bulk}}^2 \sum_{m=0}^{N} \left[ R_F T_{\text{bulk}} \right]^{2m} \\
T &= T_F^2 T_{\text{bulk}} \sum_{m=0}^{N} \left[ R_F T_{\text{bulk}} \right]^{2m}
\end{aligned}
\label{eqn:Fresnel_coefs_N_bounce}
\end{equation}
For the case of an infinite number of bounces, \cref{eqn:Fresnel_coefs_N_bounce} simplifies to:
\begin{equation}
\begin{aligned}
R &= R_F + \frac{R_F T_F^2 T_{\text{bulk}}^2}{1-R_F^2 T_{\text{bulk}}^2} \\
T &= \frac{T_F^2 T_{\text{bulk}}}{1-R_F^2 T_{\text{bulk}}^2},
\end{aligned}
\label{eqn:Fresnel_coefs_inf_bounce}
\end{equation}
whereas if only a single bounce occurs, \cref{eqn:Fresnel_coefs_N_bounce} reduces to:
\begin{equation}
\begin{aligned}
R &= R_F + R_F T_F^2 T_{\text{bulk}}^2 \\
T &= T_F^2 T_{\text{bulk}}
\end{aligned}
\label{eqn:Fresnel_coefs_1_bounce}
\end{equation}

We now consider the fractional error introduced by ignoring the interface effects described by $T_F$ and $R_F$. That is, what would happen if we assume that the interfaces have no effect on the transmitted intensity? We introduce the relative error $\epsilon$ made by ignoring the Fresnel coefficients of \cref{eqn:Fresnel_coefs_inf_bounce}:
\begin{equation}
\epsilon \equiv \frac{T_{\text{bulk}}}{T} - 1
\label{eqn:Fresnel_rel_err}
\end{equation}

As an example, consider a 100 nm thick Si sample measured in transmission near the Si $L$-edge (about 100 eV), as shown in \cref{fig:Si_transmission_Fresnel}. The relative error is in the range of one part in $10^4$ to $10^5$, well below our experimental detection limit. Silicon was chosen due to its data availability above and below the absorption edge, but this behavior is true for all materials in normal transmission.

The real part of the complex index becomes important when the sample isn't normal to the beam, as shown in the right panel of \cref{fig:Fresnel_Geometry}. In this case, the Fresnel equations are a bit messier:
\begin{equation}
\begin{aligned}
R_s &= \left| \frac{\tilde{n}_1 \cos \theta_i - \tilde{n}_2 \cos \theta_t}{\tilde{n}_1 \cos \theta_i + \tilde{n}_2 \cos \theta_t}  \right|^2 \\
R_p &= \left| \frac{\tilde{n}_1 \cos \theta_t - \tilde{n}_2 \cos \theta_i}{\tilde{n}_1 \cos \theta_t + \tilde{n}_2 \cos \theta_i}  \right|^2 \\
T_s &= 1 - R_s \\
T_p &= 1 - R_p \\
%\theta_t &= \sqrt{1- \left( \frac{n_1}{n_2} \sin \theta_i \right)^2}
\end{aligned}
\label{eqn:Fresnel_nonnormal}
\end{equation}

Here, the subscripts $s$ and $p$ denote the polarization relative to the surface normal. In a vacuum, $\tilde{n}_1=1$ and $\tilde{n}_2$ is the index of the sample. We can extract the relevant physics without any additional manipulation of the \cref{eqn:Fresnel_nonnormal}. Right away, we can see that unlike \cref{eqn:fresnel_normal}, \cref{eqn:Fresnel_nonnormal} is symmetric in the real and imaginary parts of the sample's complex index, $\tilde{n}_2$. In the limit of a thick slab, ($h \gg \alpha$), the light is attenuated before it can reflect off the back surface and we have $T \rightarrow 0$ and $R \rightarrow R_{s,p}$. That is, the only contributions to the reflected intensity are from the interface and possibly the sample volume within $z \approx 1/\alpha$ of the interface. As a result, both parts of $\tilde{n}_2$ will make significant contributions to the reflected intensity.

\section{Sample Requirements and Geometry}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Sample_trans_CXRO.png}
	\caption{Calculated XUV transmission of various materials. Data from \cite{gulliksonCXROXRayInteractions}.}
	\label{fig:Sample_trans_CXRO}
	% figure generated using \PythonScripts\CXRO\test\CXRO.py
\end{figure}

There are several sample requirements for a successful condensed matter transient absorption experiment. First and foremost, the sample needs to have an absorption edge within the bandwidth of the XUV source. Second, the material must be the correct thickness for a transmission measurement, given the signal to noise of the appratus. If the material is too thick, the ground state will absorb most of the XUV flux and the resulting spectrum will be too close to the noise floor of the apparatus. If it is too thin, the laser-induced change of the ground state (on the order of $1-10\%$) will be lost in the noise. As a general guideline, a sample that absorbs 50\% at the spectral feature of interest provides a good compromise between these conflicting requirements. \cref{fig:Sample_trans_CXRO} plots the expected transmission of several materials, calculated from the atomic scattering factors \cite{gulliksonCXROXRayInteractions}. A typical sample will be on the order of 10 - 200 nm thick, depending on the material.

Next, the sample needs to be excitable using laser sources present in our lab (i.e., ultrafast pulses with wavelengths between 800 nm and a couple of microns). To minimize the slow build up of heat (on the order of seconds) and laser-induced damage, the sample needs to be rastered through the laser focus as the experiment is performed. This rastering method necessitates both a large clear aperture ($\sim$ 1 mm$^2$ - 1 cm$^2$) and good sample uniformity. Samples that meet the above thickness and clear aperture requirements are extremely delicate, with thicknesses between 5,000 and 100,000 times smaller than their freestanding lateral dimensions. As such, one should expect most samples to break before, during and after measurements, and a successful experiment will have a materials pipeline that is capable of producing multiple, consistent samples in a short time frame.

\section{Data Collection}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Filter_transmission_CXRO.png}
	\caption{Calculated XUV transmission of various metallic filters. Data from \cite{gulliksonCXROXRayInteractions}.}
	\label{fig:Filter_transmission_CXRO}
	% figure generated using \PythonScripts\CXRO\test\CXRO.py
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Rastering_Methods.png}
	\caption{Schematic of competing raster methods, shown in the sample's reference frame. The clear aperture of the sample is represented by the interior of the black square. The laser propagation direction is out of the page. The laser focal spots are shown as red circles, and the movement of the sample holder relative to the laser focus is indicated by arrows. This diagram is to scale for a $1\times1$ mm$^2$ clear aperture sample, a 60 $\mu$m diameter IR focal spot and a 200 $\mu$m step size.}
	\label{fig:Rastering_Methods}
	%figure created using \Python Scripts\rastering\raster_diagram.py
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/sample_holder.png}
	\caption{\textit{In-situ} imaging of the samples within the target chamber. Left: optical setup for \textit{in-situ} imaging of samples. C: Si CCD camera, HM: hole mirror, SH: sample holder, FM: flip mirror, L: lens. Right: false color image showing the sample holder with a 3 x 3 grid of 5 mm diameter clear apertures. Samples are held in a clamshell design centered in the clear apertures. Samples are backlit using a flashlight.}
	\label{fig:sample_holder}
\end{figure}

\textbf{talk about general data collection here. i.e., what do you actually record during an experiment?}

The \textit{absorbance}\footnote{The terms absorbance and optical density are often used interchangably.} $A$ is defined as the negative logarithm of the transmission:
\begin{equation}
A(E) = -\log_{10} \left( T \right) = -\log_{10} \left(\frac{S_{gs}(E)}{S_{vac}(E)} \right).
\label{eqn:absorbance}
\end{equation}

In \cref{eqn:absorbance}, $S_{gs}(E)$ is the XUV spectrum transmitted by the sample in its ground state and $S_{vac}(E)$ is the spectrum without the sample present. Therefore we can measure the sample's ground state absorbance by measuring the harmonic spectrum with and without the sample in the XUV beam.

The \textit{change in absorbance} $\Delta A$ between the ground and excited state which is induced by an IR pulse is therefore:
\begin{equation}
\begin{aligned}
\Delta A(E,\tau) = & A_{sig}(E,\tau) - A_{gs}(E) \\
= & -\log_{10} \left(\frac{S_{sig}(E,\tau)}{S_{vac}(E)} \right) -  \log_{10} \left(\frac{S_{gs}(E)}{S_{vac}(E)} \right) \\
= & -\log_{10} \left(\frac{S_{sig}(E,\tau)}{S_{gs}(E)} \right).
%\Delta A(E,\tau) = -\log_{10} \left(\frac{S_{sig}(E,\tau)}{S_{gs}(E)} \right).
%\label{eqn:delta-OD}
\end{aligned}
\label{eqn:delta-A}
\end{equation}
In \cref{eqn:delta-A}, the signal spectrum $S_{sig}(E,\tau)$ is the spectra that results from an IR pulse hitting the sample, followed by an XUV pulse after a delay of $\tau \equiv t_{XUV} - t_{IR}$. Note that negative delays mean the XUV arrives at the sample before the IR and zero delay indicates temporal overlap of the two pulses. It is assumed that a delay of negative infinity is equivalent to a ground state measurement: $S_{sig}(E,\tau=-\infty) = S_{gs}$.

An ATAS experiment is simply a collection of recorded spectra taken over a range of delay points with otherwise identical experimental conditions. However, we have implemented several techniques to improve the fidelity of our data.

HHG is an extremely inefficient process, with a conversion ratio on the order of $10^{-6}$. After the generation cell, the leftover IR light must be blocked or it will destroy any sample located downstream. We use a thin metallic filter (Al, Zr or Sn), placed about 1 m after the harmonic source, to strip out the generating infrared field. The choice of filter is dictated by the features we want to study. For more detail, see \cref{fig:Filter_transmission_CXRO}.

As an extremely nonlinear process, HHG's conversion efficiency is highly dependent on the input laser pointing, peak power, pulse duration, spatial mode, etc. -- all of which are affected by laboratory environmental conditions and the activity of other group members within our lab complex. As a result, the total harmonic yield drifts slowly throughout the course of the experiment. To minimize the effect of this slow drift, we take a ground state spectrum for each delay point. A computer-controlled home-built shutter system blocks the IR laser in the pump arm between measurements (see \cref{fig:beamline_schematic}). Taking back-to-back ground and excited state spectra significantly lowers the harmonic stability requirements; we require stability on the order of twice the exposure time ($\sim$ seconds), rather than the entire experimental run ($\sim$ hours).

Our spectrometer's CMOS camera has a bit depth of 16, corresponding to a maximum value of $2^{16}-1 = 65,535$ counts before saturation. The exposure time is set so that the amplitude of the brightest harmonic on the detector is about 10\% below this limit, which allows for an upward drift in harmonic yield to occur without invalidating the dataset. An exposure time of 3 seconds is typical for a 100 nm Ge sample at 125 Hz (375 laser shots).

Although the Spitfire laser system has a maximum repetition rate of 1 kHz, we perform solid state ATAS experiments at a much lower rate (125 or 250 Hz) by adjusting amplifier's Pockels cell firing rate. The lower repetition rate allows the sample to more fully relax between laser shots, reducing the effects of millisecond thermal processes on our measurements. It also reduces the average power on the sample for a given pulse energy, which lowers the steady state temperature of the sample. On the other hand, it allows us to increase the pulse energy while maintaining a constant average power on the sample.

During the experiment, the sample is rastered across the focus to reduce any deleterious effects of long term uninterrupted laser exposure. During motor movement, the IR beam is blocked with a shutter but the relatively weak XUV beam is allowed to remain on the sample. Each pair of measurements (ground state, excited state) in a given delay scan has a unique position on the sample. Typical step sizes are 200 $\mu$m, which is larger than the measured XUV spot size of $\sim$12 $\mu$m and the IR spot size of $\sim$30 $\mu$m. Two raster schemes are schematically shown in \cref{fig:Rastering_Methods}. The method shown in the left panel produces a sawtooth pattern on the sample. This method gives very accurate positioning, as the vertical motor is almost always approaching the final position from the same direction. However, the diagonal steps are $\sqrt{N^2+1}$ times longer than the vertical steps, where $N$ is the number of vertical steps in the pattern. As a result, there is a bimodal distribution of motor transit times between measurements. If the sample is not fully relaxed between motor movements, this will lead to an inconsistent measurement of the ground state $S_{gs}(E)$. The method shown in the right panel alleviates this problem by requiring equal step sizes. Measurements presented in this work were acquired using the method shown in the right panel.

Before measuring a sample's response for the first time, or after a major optical alignment, a map of the sample must be created. Creating this map serves two purposes: it verifies sample XUV absorption uniformity and it determines the motor coordinates of the sample's clear aperture. To avoid edge effects, the edges of the raster area are chosen to be 200 $\mu$m away from the edge of the clear aperture (see \cref{fig:Rastering_Methods}).

The data collection sequence can be summarized as \textit{excited state $\rightarrow$ ground state $\rightarrow$ move motors}. Details of this sequence are as follows. First, the sample moves to a given raster position and delay wedge position, the IR shutter opens and an excited state measurement is taken. Then, the IR shutter closes and a ground state measurement is taken. Finally, the sample moves to the next raster position as the delay wedge pair moves to the next delay position. The system is programmed to wait for the wedges to become stationary before the next measurement begins.

Note that in this sequence, the time between the $i^{th}$ excited state and $i^{th}$ ground state measurements is equal to the exposure time, but the time between the $i^{th}$ ground state measurement and the $(i+1)^{th}$ excited state measurement is equal to the delay wedge motor transit time\footnote{In this analysis we neglect the role of the XUV-IR delay $\tau$. However, $\tau \sim$ 1 fs - 1 ps, which is neglible compared to the motor transit time $\sim$ 1 s.}. This sequence is preferable to the alternative (\textit{ground state $\rightarrow$ excited state $\rightarrow$ move motors}), as that would result in a delay step size-dependent relaxation time between the $i^{th}$ excited state and the $i+1^{th}$ ground state measurement. Since $\Delta A(E,\tau)$ is calculated between pairs of ground and excited state measurements at a given delay wedge position, the sequence \textit{excited state $\rightarrow$ ground state $\rightarrow$ move motors} is preferred.



To further improve our signal to noise ratio, we average multiple delay scans together. A typical $\Delta A$ measurement will repeat a delay scan between 10 and 50 times. Each delay scan uses the raster points of the previous delay scan so there is a one-to-one mapping of delay to sample position.



damage thresholds, sample thickness, sample uniformity

creating XUV sample maps when we get a new. this allows us to map out the clear aperture of the sample, as well as checking the uniformity of the sample.

\section{The Supporting Membrane}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/nitride_map.png}
	\caption{XUV transmission map of 30 nm silicone nitride freestanding membrane. Left panel: integrated harmonic peaks in the range ?? -- ?? eV. Sample holder motor positions are indicated by x- and y-positions. Right panel: histrogram of logarithmic deviation of counts from the average.}
	\label{fig:nitride_map}
	% figure created using \Python Scripts\Spectrometer\test\rastermap.py
	% dataset: C:\testdata\2019_09_10\4_55_32 PM_nitride_map1
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/SiN_Al_transmission.png}
	\caption{XUV transmission measurements of Al metallica filter and silicon nitride membrane. Left panel: normalized XUV counts for i) unfiltered HHG signal, ii) HHG going through a 200 nm Al filter and iii) HHG going through a 200 nm Al filter and 30 nm of silicon nitride. The Jacobian (\cref{eqn:spectrometer_jacobian}) is included here. Right panel: transmission curves obtained from the left panel's data. Also shown are literature values for 20 nm of silicon nitride and 200 nm of Al with two 4 nm oxide layers \cite{gulliksonCXROXRayInteractions}. Multilayer interference is not taken into account. Oscillations in measured transmission are numerical artifacts which will be discussed in the text.}
	\label{fig:SiN_Al_transmission}
	% dataset: \2019_05_02\
	% plotted using: \Python Scripts\Spectrometer\test\nitride_trans.py
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Sample_Geometry.png}
	\caption{Cartoon showing the cross section of the free standing sample heterostructure. A 500 $\mu$m thick Si frame supports a freestanding 30 nm low stress silicon nitride membrane (Norcada QX7300X), upon which 100 nm of germanium has been deposited. The Si frame has a 3x3 mm$^2$ square clear aperture and a 7.5x7.5 mm$^2$ square external dimension. The taper of the Si frame thickness along the perimeter of the clear aperture forms a knife edge. In an ATAS experiment, the XUV and IR pulses propagate from the top to bottom of the figure.}
	\label{fig:Sample_Geometry}
\end{figure}

While most materials have an absorption edge within the range 25 - 150 eV, there are very few commercially available pre-fabricated materials with both the requistite large clear aperture and thickness. Note that either characteristic is relatively easy to achieve individually, but their combination presents unique materials challenges. We review three competeting synthesis methods that can produce a quasi-2D sample:
\begin{enumerate}
	\item sample growth on a traditional substrate, followed by chemical back-etching or milling of the substrate until sub-micron thickness of the heterostructure is achieved;
	\item sample growth on a traditional substrate, followed by mechanical transfer onto a membrane;
	\item sample growth on a membrane.
\end{enumerate}
Sample quality and composition is heavily impacted by local growth conditions such as substrate temperature, deposition rate, substrate crystal cut, substrate-sample lattice mismatch, etc. Many of these characteristics are changed when growing on a substrate of a different cut, or by replacing a substrate with a membrane. In general, one should not expect success when applying a substrate-optimized growth recipe to a freestanding membrane. Therefore, methods 1 and 2 will yield the highest quality samples, as they leverage already-developed sample recipes. However, both methods require a technically difficult second step that is prone to failure.

Selective chemical etching recipes exist for certain compounds, but they usually require an additional layer in the heterostructure to protect the sample. Adding this layer will come at the expense of the total XUV flux transmitted by the heterostructure. Additionally, the chemical etching rates are highly dependent on local chemistry, fluid convection and temperature \cite{chiuPhotoluminescenceEvolutionGaAs2015}, which ultimately means that the amount of material removed is uncontrollable and unrepeatable within our requirements (499.9 $\mu$m $\pm$ 10 nm removed from a 500 $\mu$m substrate). For these reasons, we decided to not pursue a chemical etch recipe. Ion or electron milling is more controllable, but too expensive to implement on a large scale. The above reasons preclude the use of Method 1.

Mechanical transfer of thin samples is a tried and true method, but it usually results in to flakes with lateral dimensions on the order of 100 $\mu$m. Repeated transfer of many flakes is possible, but there little control over their exact positioning on the membrane. This results in samples folding upon themselves during the transfer process, or having two thin flakes overlap each other. Each time this happens, it doubles the effective optical thickness of the sample, changing the IR and XUV absorption properties significantly.

An XUV spatial measurement needs to be taken prior to any ATAS experiment, but a non-uniform distribution of flakes on a membrane would require a much higher resolution map. This is because the flakes are on the order of the XUV and IR focii, so it is critical that the raster points in \cref{fig:Rastering_Methods} correspond to the center of each flake to avoid edge diffraction and to minimize the effects of slow laser pointing drift. For a uniform film, a map can be taken using 200-250 $\mu$m step sizes, as the most important feature is the border of the clear aperture. On the other hand, each flake would have to be sampled $\sim$5 times in each direction to find its center. As a conservative estimate, a membrane covered with $100 \times 100\text{ }\mu$m$^2$ flakes would require a step size of 20 $\mu$m, which increases the number of raster points by a factor of $10^2 = 100$. Considering that a $3 \times 3 \text{ mm}^2$ clear aperture sampled with 200 $\mu$m steps takes $\sim$45 minutes to map, a random distribution of flakes would take a prohibitively long time to map out.

With the first two methods ruled out, we turn to the third method of growing directly on a freestanding membrane. Although it will result in a lower quality sample, it does not have the same technical hurdles of the previous two methods. However, the large clear area makes the heterostructure extremely fragile. We initially attempted to circumvent this problem by using smaller clear apertures.

As shown in \cref{fig:Rastering_Methods}, most of the sample's area isn't directly used by the laser - it exists as a buffer between the grid of sample points. An alternative to a single clear aperture is an array of micro-apertures, each with a diameter on the order of the IR spot size. The micro-apertures exist within a mechanically robust substrate and a thin membrane lies on top of the structure. This configuration significantly eases the material strength requirements by reducing the size of the unsupported area from cm-scale to sub-mm-scale. The regular grid of apertures avoids the difficulties of a randomly distributed sample, easing the XUV mapping step size requirements. Fortunately, these arrays are commercially available from Silson, Norcada (silicon nitride membranes) and US Applied Diamond (diamond membranes) but we encountered technical difficulties in their implementation. Because the aperture size is on the order of the size of the IR focal spot, there is very little room for positioning error, and our motors were insufficiently precise for this application. Further, these arrays are typically only available in at most a $3\times3$ array, which provides an insufficient number of raster points for an experiment.

With these limitations in mind, we decided to use large aperture x-ray windows from Norcada. These windows consist of a mechanically robust Si frame substrate with a square clear aperture cut through the center. The structure is fabricated so that a thin membrane covers the clear aperture. A cross section is shown in \cref{fig:Sample_Geometry}.

Norcada offers these structures with either a silicon (polycrystalline or single-crystal) or a silicon nitride membrane. An ideal membrane is transparent to both XUV and IR wavelengths with a high damage threshold. Referring to \cref{fig:Sample_trans_CXRO}, 100 nm of Si provides a relatively flat transmission curve from 25 to 100 eV. In constrast, 30 nm of silicon nitride has poor, but featureless, transmission at lower energies. Both materials transmit light below their bandgaps (5 eV for SiN and 1.14 eV for Si). Finally, silicon nitride's higher bandgap results in a significantly higher laser damage threshold \cite{gamalyAblationSolidsFemtosecond2002, austinFemtosecondLaserDamage2018, keldyshIonizationFieldStrong1965}. Taking all these factors into account, we decided to use 30 nm silicon nitride membranes for germanium transient absorption experiments. The measured transmission of a typical membrane is shown in \cref{fig:SiN_Al_transmission}.

Likewise, experiments with micro-flakes of $WS_2$ samples were attempted, 



\section{Germanium as a Sample}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Ge_band_diagram.png}
	\caption{Band structure and $3d$ states of Germanium. Blue arrows indicate XUV-induced transitions from the core levels to valence and conduction bands. Red arrows indicate IR-induced transitions across the band gap. Arrows are displaced horizontally for visual clarity. Figure adapted from \cite{NSMArchivePhysical}.}
	\label{fig:Ge_band_diagram}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Ge_IR_absorption.png}
	\caption{this figure shows the IR absorption of germanium from the literature. (citation). or maybe the n,k values from refractiveindex.info}
	\label{fig:Ge_IR_absorption}
\end{figure}

talk about the germanium sample, why it was chosen as a sample, how it was grown and how thick it was.



\section{dialing in the IR parameters}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/sample_damage.png}
	\caption{False color images showing laser drilled freestanding membranes. Left: pristine 260 nm thick Si membrane (Norcada). Middle: same sample, after a performing an IR power scan that exceeded the membrane's damage threshold. A $<$200 $\mu$m hole is visible as a cluster of bright pixels near the center of the membrane. Right: 30 nm SiN membrane after a similar power scan showing a ``popped'' membrane. Note the ragged edges near the clear aperture of the frame are all that remain of the membrane. For all images, the apparent brightness gradient across the samples is caused by inconsistent backlighting. Images were taken using the optical setup shown in the left panel of \cref{fig:sample_holder}.}
	\label{fig:sample_damage}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Si_damage.png}
	\caption{200 nm silicon}
	\label{fig:Si_damage}
\end{figure}

IR power controlled by waveplate-polarizer pair and monitored during measurements using a photodiode (see \cref{fig:beamline_schematic}). absolute measurements of the average power were taken with a power meter at the completion of the experiment. did intensity scans until the sample was destroyed, then backed off a little bit.


Ge-specific experimental parameters: wavelength, generation conditions, exposure time, MCP settings, rep rate, etc.

calculated excitation percentage, from lens calculations and measured IR power.

does the measured signal strength make sense? i.e., order of magnitude

show pictures of popped membranes. show delay spectrograms of drilled out samples.

\section{50 nm Ge measurements}
i think we have a dataset or two showing a weak signal.


\section{100 nm Ge measurements}
we went to 100 nm because the 50 nm was too weak.

$N=50$ dataset experimental parameters: $\lambda$ = 1430 nm, Spitfire rep. rate = 125 Hz, pump energy (before focusing optics) $\sim$ 2.9 $\mu$J per pulse, camera exposure time = 3 seconds. each run took about 6 minutes for a total collection time of about 5 hours. 

\begin{figure}
	\centering
	\includegraphics[width=0.75\textwidth]{figures/chap3/Ge_map.png}
	\caption{Left panel: spatial mapping of integrated XUV counts \textbf{(integrated over what energy range?)} of a 100 nm Ge + 30 nm silicon nitride sample. Right panel: histogram of values from the left panel.}
	\label{fig:Ge_map}
		% figure created using \Python Scripts\Spectrometer\test\rastermap.py
	% dataset: C:\testdata\2019_08_27\11_26_52 AM_Ge7_map1
\end{figure}

\section{Data Processing}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Data_Pipeline.png}
	\caption{this figure shows the data processing pipeline. it shows how we start with PumpOn-Off 2D images and transform them into spectrograms. it includes steps like an absorbance (A) calculation, spectral lineouts, frequency filtering and smooth, energy calibration, etc.}
	\label{fig:Data_Pipeline}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Ge_100nm_ground_state.png}
	\caption{this figure shows the ground state $A$ of 100 nm germanium.}
	\label{fig:Ge_100nm_ground_state}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/PumpOn_vs_PumpOff.png}
	\caption{this figure shows, using real data, a pump off and pump on spectral lineout. in another panel, it shows the $\Delta A$.}
	\label{fig:PumpOn_vs_PumpOff}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Ge_uncorrected_raw_spectrogram.png}
	\caption{$N=50$ averaged delay scans. no corrections have been made to the data}
	\label{fig:Ge_uncorrected_raw_spectrogram}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/uncorrected_hist.png}
	\caption{$N=50$ averaged delay scans. no corrections have been made to the data. histogram of $\Delta A$ for 3 selected features. dataset is same as \cref{fig:Ge_uncorrected_raw_spectrogram}.}
	\label{fig:uncorrected_hist}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/C_factor_image.png}
	\caption{correction factor, $C(\tau,E)$, from \cref{eqn:deltaA_linear_correction}.}
	\label{fig:C_factor_image}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/C_factor_hist.png}
	\caption{histogram of correction factor, $C(\tau,E)$, values from \cref{eqn:deltaA_linear_correction}.}
	\label{fig:C_factor_hist}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/corrected_hist.png}
	\caption{histogram of spectral features from dataset with correction factor $C(\tau,E)$ applied }
	\label{fig:corrected_hist}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Ge_corrected_raw_spectrogram.png}
	\caption{normalized dataset: dataset with correction factor $C(\tau,E)$ applied }
	\label{fig:Ge_corrected_raw_spectrogram}
	% data set: ???
	% figure made using: ???
\end{figure}

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{figures/chap3/Ge_corrected_filtered_spectrogram.png}
	\caption{normalized dataset with frequency filter applied }
	\label{fig:Ge_corrected_filtered_spectrogram}
	% data set: ???
	% figure made using: ???
\end{figure}


The XUV photon spectrometer utilizes a flat field grating (Hitachi, 1200 l/mm) to spectrally disperse the XUV light. The grating is designed to focus along the spectral axis (horizontal direction) while preserving the spatial profile of the beam (vertical direction). The focus of the grating is incident on a 75 mm diameter imaging quality microchannel plate (MCP) array (Photonis), which converts the XUV photons into electrons via a nonlinear avalanche process with a gain of approximately $10^6 - 10^8$. These electrons strike a phosphor screen, which converts the electrons into visible photons (central wavelength $\sim480$ nm). The visible photons exit the vacuum chamber via a glass feedthrough and are imaged by a lens and CMOS camera (Andor). The result is a two dimensional array of counts, with the horizontal axis representing the spectral content and the vertical axis representing the spatial profile of the beam.

talk about all the steps you use to process the data, starting from the 2d image and ending with the delta-A spectrogram.

\begin{enumerate}
	\item calibration of spectrometer energy axis and delay axis (just state it as fact, don't go into detail)
	\item data reduction: 2D image to 1D spectral lineout for each measurement. note that the jacobian needs to be used for plotting counts vs energy, but not for $\Delta A$ or $A$ since it divides out
	\item investigation of noise: peaks vs valleys vs slopes of harmonics. most of the noise comes from not the peaks, so we use the value at the peak for later analysis
	\item sample drilling or harmonic drift? inconclusive? or \textit{no conclusive evidence of drilling?}
	\item correlations between different harmonic peaks in $\Delta A$
	\item linear correction method $C(\tau,E)$
	\item choice of dx=2 method
	\item frequency filtering
	\item failed methods: SVD, interpolation
\end{enumerate}

\subsection{energy and delay calibration}
\subsection{A note about the Jacobian}

At each pixel, the spectrometer's camera records the integrated counts within the area of one pixel. We wish to convert the measured dataset (counts \textit{vs.} spectral pixel) to a physically meaningful spectrum (counts \textit{vs.} photon energy) while conserving energy \cite{mooneyGetBasicsRight2013}.

More precisely, our measurement samples a counts function $f_p$ in the spectral pixel basis $p$:
\begin{equation}
f_p (p): \text{spectral pixel} \rightarrow \text{counts}.
\end{equation}
We can convert the domain of the spectrometer's dataset from spectral pixels $p$ to energy $E$ (in eV) using an invertible polynomial transformation\footnote{The details surrounding the choice of this transformation will be discussed elsewhere in the dissertation.}:
\begin{equation}
\begin{aligned}
E(p)&: \text{spectral pixel} \rightarrow \text{energy [eV]}, \\
E(p) &= a_4 p^2 + a_3 p^3 + a_2 p^2 + a_1 p + a_0.
\end{aligned}
\end{equation}
Let the inverse of $E(p)$ be $p(E)$. From energy conservation, the transformation must preserve the integrated counts:
\begin{equation}
f_p(p) \text{ } dp = f_E(E) \text{ } dE.
\end{equation}
Rearranging, we obtain an expression for the counts expressed in the energy domain, $f_E$:
\begin{equation}
f_E (E) = f_p (p) \frac{dp}{dE} = f_p(p) \frac{d}{dE} p(E).
\label{eqn:spectrometer_jacobian}
\end{equation}
Therfore, the measured spectrum $f_p(p)$ in the pixel basis can be converted to the energy basis by multiplying it by a factor of $\frac{d}{dE} p(E)$. Note that this factor is only important when considering spectrometer counts; calculations of $A$ or $\Delta A$ can omit the Jacobian as it is common to both spectra and will divide out.

\subsection{source of noise}
\subsection{sample drilling or random drift?}
\subsection{correlations between harmonic peaks in $\Delta A$}
\subsection{integration vs summation near harmonic peaks}
\subsection{apparent $\omega$ and $2\omega$ oscillations in data}



mention calibration of spectrometer in passing, 2D image $\rightarrow$ 1D spectrum. jacobian needs to be used for plotting counts vs energy, but not for delta-OD, OD or transmission figures.

\begin{equation}
\Delta A^{\text{meas}}(\tau, E) = -\log_{10} \left( \frac{I_{on} f}{I_{off}} \right) = \Delta A^{\text{norm}}(\tau,E) + C(\tau,E)
\label{eqn:deltaA_linear_correction}
\end{equation}
